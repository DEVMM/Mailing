<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
	<title>Aprovações</title>
	<link type="text/css" rel="stylesheet" href="estilo.css" />

<style>
.loader {
	position: fixed;
	left: 0px;
	top: 0px;
	width: 100%;
	height: 100%;
	z-index: 9999;
	background: url('img/page-loader.gif') 50% 50% no-repeat
		rgb(249, 249, 249);
}
</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
$(window).load(function() {
	$(".loader").fadeOut("slow");
})
</script>
</h:head>
<h:body>
	<div class="loader">
	</div>
   <div class="pagina">
		<h:form>
			<p:growl id="messages" />

			<p:menubar>
				<p:submenu label="Relatório">
					<p:menuitem value="Anuários" url="anuarios.xhtml" />
					<p:menuitem value="Meio e Mensagem" url="mm.xhtml" />
				</p:submenu>
				<p:menuitem value="Aprovações" url="aprovacoes.xhtml" />
				<f:facet name="options">
					<p:commandButton action="#{loginBean.logout}" value="Logout"
						ajax="false"></p:commandButton>
				</f:facet>
			</p:menubar>
		</h:form>

		

		<h:form id="form" >
	
			<p>Bem vindo, #{loginBean.nome}</p>

			<p:dataTable value="#{index.provacoesList}" var="item" emptyMessage="Não há solicitações para serem aprovadas">


				<p:column headerText="Usuario">
					<h:outputText value="#{item.id}" />
				</p:column>
				<p:column headerText="Status">
					<h:outputText value="#{item.status}" />
				</p:column>
				<p:column headerText="Data">
					<h:outputText value="#{item.dt.time}">
						<f:convertDateTime pattern="dd/MM/yyyy"
							timeZone="America/Sao_Paulo" />
					</h:outputText>
				</p:column>
				<p:column headerText="Quant. de Dados">
					<h:outputText value="#{item.quantidade}" />
				</p:column>
				<p:column>
					<p:commandLink id="aprovar">
						<p:commandButton value="teste" 
							actionListener="#{growlView.showMessage}"
							action="#{index.removerSolicitacao}"  update="@form">
							<f:setPropertyActionListener value="#{item.id}"
								target="#{index.ids}" />
							<f:setPropertyActionListener value="Aprovado"
								target="#{aprovacoes.status}" />
								
						</p:commandButton>
					</p:commandLink>

				</p:column>
				<p:column>
					<p:commandLink id="naoAprovar">
						<p:commandButton value="Não aprovar"
							actionListener="#{growlView.naoAprovada}"
							action="#{aprovacoes.aprovar}" update="@form"> 
							<f:setPropertyActionListener value="#{item.id}"
								target="#{aprovacoes.id}" />
							<f:setPropertyActionListener value="Reprovado"
								target="#{aprovacoes.status}" />
							
						</p:commandButton>
					</p:commandLink>
				</p:column>
			</p:dataTable>
			</h:form>
	</div>

</h:body>
</html>